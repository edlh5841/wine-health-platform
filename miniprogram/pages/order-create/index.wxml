<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="nav-bar">
    <text class="back" bindtap="goBack">â†</text>
    <text class="title">ç¡®è®¤è®¢å•</text>
    <text class="service">?å®¢æœ</text>
  </view>

  <!-- æŠ€å¸ˆä¿¡æ¯å¡ç‰‡ -->
  <view class="card tech-card">
    <view class="card-header">
      <text class="card-title">ğŸª æœåŠ¡ä¿¡æ¯</text>
    </view>
    
    <view class="tech-info-row">
      <text class="label">æŠ€å¸ˆï¼š</text>
      <text class="value">{{technician.realName}} (V{{technician.workYears > 5 ? 5 : technician.workYears}}ç­‰çº§)</text>
    </view>
    
    <view class="tech-info-row">
      <text class="label">æœåŠ¡ï¼š</text>
      <text class="value">æ¨æ‹¿ï¼ˆ{{duration}}åˆ†é’Ÿï¼‰</text>
    </view>
    
    <view class="tech-info-row">
      <text class="label">é¢„ä¼°ç”¨é‡ï¼š</text>
      <text class="value">{{predictQuantity}}ml</text>
    </view>
  </view>

  <!-- é…’å“é€‰æ‹© -->
  <view class="card deposit-card">
    <view class="card-header">
      <text class="card-title">ğŸ“¦ é€‰æ‹©æ‰˜ç®¡é…’å“</text>
    </view>
    
    <view class="deposit-list">
      <view class="deposit-item {{depositIndex === index ? 'selected' : ''}}" 
            wx:for="{{depositBatches}}" wx:key="id" 
            bindtap="selectDeposit" data-index="{{index}}">
        <view class="radio {{depositIndex === index ? 'checked' : ''}}"></view>
        
        <view class="deposit-info">
          <text class="deposit-name">{{item.productName}}</text>
          <text class="deposit-batch">æ‰¹æ¬¡ï¼š{{item.batchNo}}</text>
          <text class="deposit-stock">åº“å­˜ï¼š{{item.availableQuantity}}ml</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é¢„ä¼°ç”¨é‡ -->
  <view class="card quantity-card">
    <view class="card-header">
      <text class="card-title">ğŸ“Š é¢„ä¼°ç”¨é‡ (ml)</text>
    </view>
    
    <input class="quantity-input" type="number" value="{{predictQuantity}}" 
           bindinput="onQuantityChange" placeholder="è¯·è¾“å…¥ç”¨é‡" />
  </view>

  <!-- è´¹ç”¨æ˜ç»† -->
  <view class="card amount-card">
    <view class="card-header">
      <text class="card-title">ğŸ’° è´¹ç”¨æ˜ç»†</text>
    </view>
    
    <view class="amount-row">
      <text class="amount-label">æœåŠ¡è´¹ç”¨ï¼š</text>
      <text class="amount-value">Â¥ {{orderAmount}}</text>
    </view>
    
    <view class="amount-row highlight">
      <text class="amount-label">æ–°äººä¼˜æƒ ï¼š</text>
      <text class="amount-value discount">-Â¥ 50.00</text>
    </view>
    
    <view class="amount-row">
      <text class="amount-label">é¢„ä¼°ä¸ªç¨ï¼š</text>
      <text class="amount-value">-Â¥ {{(orderAmount * 0.12).toFixed(2)}}</text>
    </view>
    
    <view class="divider"></view>
    
    <view class="amount-row total">
      <text class="amount-label">å®ä»˜é‡‘é¢ï¼š</text>
      <text class="amount-value total-price">Â¥ {{(orderAmount - 50).toFixed(2)}}</text>
    </view>
  </view>

  <!-- æäº¤æŒ‰é’® -->
  <view class="footer">
    <button class="btn-primary submit-btn" bindtap="submitOrder" loading="{{submitting}}">
      ç«‹å³ä¸‹å•å¹¶æ”¯ä»˜
    </button>
  </view>
</view>
